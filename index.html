<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🌐 Multi-Language IDE</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/theme/dracula.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/theme/eclipse.min.css">
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
body {
  margin: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  display: flex;
  height: 100vh;
  overflow: hidden;
  transition: background 0.3s, color 0.3s;
}
body.light {
  background: #f8f9fa;
  color: #212529;
}
body.dark {
  background: #121212;
  color: #eaeaea;
}
.sidebar {
  width: 220px;
  background: #1e1e1e;
  color: white;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}
.sidebar h2 {
  font-size: 18px;
  margin-bottom: 15px;
  text-align: center;
  padding-bottom: 10px;
  border-bottom: 1px solid #444;
}
.lang-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.lang-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: #333;
  border: none;
  color: white;
  font-size: 14px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.3s;
  width: 100%;
  text-align: left;
}
.lang-btn:hover {
  background: #0078d7;
  transform: translateX(5px);
}
.lang-btn.active {
  background: #0078d7;
  box-shadow: 0 0 10px rgba(0, 120, 215, 0.5);
}
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 15px;
  background: #f0f0f0;
  border-bottom: 1px solid #ddd;
  height: 70px; /* Increased header height */
}
body.dark .header {
  background: #1e1e1e;
  border-bottom: 1px solid #333;
}
h1 {
  font-size: 22px;
  margin: 0;
}
.header-buttons {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 15px; /* Added margin to push buttons down */
}
.theme-toggle {
  padding: 8px 16px;
  background: #0078d7;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s;
  height: 36px;
}
.theme-toggle:hover {
  background: #005fa3;
  transform: scale(1.05);
}
.run-btn {
  padding: 8px 16px;
  font-size: 14px;
  background: #28a745;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 6px;
  height: 36px;
}
.run-btn:hover {
  background: #218838;
  transform: scale(1.05);
}
.split-container {
  flex: 1;
  display: flex;
  height: calc(100% - 70px); /* Adjusted for taller header */
}
.editor-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 0;
}
.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 15px;
  background: #f5f5f5;
  border-bottom: 1px solid #ddd;
}
body.dark .editor-header {
  background: #252526;
  border-bottom: 1px solid #333;
}
#editor {
  flex: 1;
  height: 100%;
  border: none;
  overflow: hidden;
}
.CodeMirror {
  height: 100% !important;
  font-size: 16px;
  padding: 10px;
}
.output-container {
  width: 35%;
  display: flex;
  flex-direction: column;
  border-left: 1px solid #ddd;
}
body.dark .output-container {
  border-left: 1px solid #333;
}
.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 15px;
  background: #f5f5f5;
  border-bottom: 1px solid #ddd;
}
body.dark .output-header {
  background: #252526;
  border-bottom: 1px solid #333;
}
.output-header h3 {
  font-size: 16px;
  margin: 0;
}
#output {
  flex: 1;
  background: #1e1e1e;
  color: #00ff00;
  padding: 12px;
  overflow: auto;
  white-space: pre-wrap;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 14px;
}
.footer {
  padding: 10px;
  text-align: center;
  font-size: 12px;
  color: #6c757d;
  border-top: 1px solid #ddd;
}
body.dark .footer {
  border-top: 1px solid #444;
  color: #aaa;
}
@media (max-width: 1024px) {
  .output-container {
    width: 45%;
  }
}
@media (max-width: 768px) {
  body {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
    max-height: 200px;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    padding: 10px;
  }
  .sidebar h2 {
    width: 100%;
    margin-bottom: 10px;
  }
  .lang-list {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5px;
  }
  .lang-btn {
    flex: 1 1 45%;
    padding: 8px;
    font-size: 12px;
    justify-content: center;
    text-align: center;
  }
  .header {
    height: auto;
    flex-direction: column;
    gap: 10px;
    padding: 10px;
  }
  .header-buttons {
    margin-top: 0;
    width: 100%;
    justify-content: center;
  }
  .split-container {
    flex-direction: column;
    height: calc(100% - 120px);
  }
  .output-container {
    width: 100%;
    height: 40%;
    border-left: none;
    border-top: 1px solid #ddd;
  }
  body.dark .output-container {
    border-top: 1px solid #333;
    border-left: none;
  }
}
</style>
</head>
<body class="light">
<div class="sidebar">
  <h2>Languages</h2>
  <div class="lang-list">
    <button class="lang-btn" onclick="loadTemplate('50','text/x-csrc')">🔵 C</button>
    <button class="lang-btn" onclick="loadTemplate('54','text/x-c++src')">💻 C++</button>
    <button class="lang-btn" onclick="loadTemplate('62','text/x-java')">☕ Java</button>
    <button class="lang-btn active" onclick="loadTemplate('71','python')">🐍 Python</button>
    <button class="lang-btn" onclick="loadTemplate('63','javascript')">⚡ JavaScript</button>
    <button class="lang-btn" onclick="loadTemplate('74','javascript')">🔷 TypeScript</button>
    <button class="lang-btn" onclick="loadTemplate('72','ruby')">💎 Ruby</button>
    <button class="lang-btn" onclick="loadTemplate('68','php')">🐘 PHP</button>
    <button class="lang-btn" onclick="loadTemplate('51','text/x-csharp')">🎯 C#</button>
    <button class="lang-btn" onclick="loadTemplate('83','swift')">🍏 Swift</button>
    <button class="lang-btn" onclick="loadTemplate('78','kotlin')">📱 Kotlin</button>
    <button class="lang-btn" onclick="loadTemplate('80','r')">📊 R</button>
    <button class="lang-btn" onclick="loadTemplate('46','shell')">🐚 Bash</button>
    <button class="lang-btn" onclick="loadTemplate('82','sql')">🗄 SQL</button>
  </div>
</div>
<div class="main">
  <div class="header">
    <h1 id="pageTitle">🐍 Python IDE</h1>
    <div class="header-buttons">
      <button class="theme-toggle" onclick="toggleTheme()">🌙 Dark/Light</button>
      <button class="run-btn" onclick="runCode()">▶ Run Code</button>
    </div>
  </div>
  <div class="split-container">
    <div class="editor-container">
      <div class="editor-header">
        <h3>Editor</h3>
        <span>Ctrl+Enter to run</span>
      </div>
      <div id="editor"></div>
    </div>
    <div class="output-container">
      <div class="output-header">
        <h3>Output</h3>
      </div>
      <pre id="output"># Welcome to Multi-Language IDE
# Select a language from the sidebar or click "Run Code" to execute the current program

print("Hello, World!")</pre>
    </div>
  </div>
  <div class="footer">
    <p>Multi-Language IDE &copy; 2023 | Powered by Judge0 API</p>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/clike/clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/python/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/php/php.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/ruby/ruby.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/sql/sql.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.9/mode/shell/shell.min.js"></script>
<script>
let editor = CodeMirror(document.getElementById("editor"), {
  value: "print('Hello, World!')",
  mode: "python",
  theme: "eclipse",
  lineNumbers: true,
  autoCloseBrackets: true,
  matchBrackets: true,
  indentUnit: 4,
  lineWrapping: true,
  extraKeys: {"Ctrl-Space": "autocomplete"},
  gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
});
const languages = {
  "50": { title: "🔵 C IDE", code: "#include <stdio.h>\n\nint main() {\n    printf(\"Hello, World!\\n\");\n    return 0;\n}" },
  "54": { title: "💻 C++ IDE", code: "#include <iostream>\nusing namespace std;\n\nint main() {\n    cout << \"Hello, World!\" << endl;\n    return 0;\n}" },
  "62": { title: "☕ Java IDE", code: "class Main {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World!\");\n    }\n}" },
  "71": { title: "🐍 Python IDE", code: "print(\"Hello, World!\")" },
  "63": { title: "⚡ JavaScript IDE", code: "console.log(\"Hello, World!\");" },
  "74": { title: "🔷 TypeScript IDE", code: "console.log(\"Hello, World!\"); // TypeScript" },
  "72": { title: "💎 Ruby IDE", code: "puts \"Hello, World!\"" },
  "68": { title: "🐘 PHP IDE", code: "<?php\n\necho \"Hello, World!\";\n\n?>" },
  "51": { title: "🎯 C# IDE", code: "using System;\n\nclass Program {\n    static void Main() {\n        Console.WriteLine(\"Hello, World!\");\n    }\n}" },
  "83": { title: "🍏 Swift IDE", code: "print(\"Hello, World!\") // Swift" },
  "78": { title: "📱 Kotlin IDE", code: "fun main() {\n    println(\"Hello, World!\")\n}" },
  "80": { title: "📊 R IDE", code: "print(\"Hello, World!\")" },
  "46": { title: "🐚 Bash IDE", code: "echo \"Hello, World!\"" },
  "82": { title: "🗄 SQL IDE", code: "SELECT \"Hello, World!\" AS message;" }
};

function loadTemplate(langId, mode) {
  editor.setValue(languages[langId].code);
  editor.setOption("mode", mode);
  editor.getWrapperElement().dataset.lang = langId;
  document.getElementById("pageTitle").textContent = languages[langId].title;
  
  // Update active button
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  event.currentTarget.classList.add('active');
}

async function runCode() {
  const langId = editor.getWrapperElement().dataset.lang || "71";
  const sourceCode = editor.getValue();
  document.getElementById("output").innerText = "⏳ Running your code...";
  
  try {
    const response = await fetch("https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=false&wait=true", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-rapidapi-host": "judge0-ce.p.rapidapi.com",
        "x-rapidapi-key": "ea470a2c3fmshff10f28d54ab1e6p1bf78cjsnb69ca428d174"
      },
      body: JSON.stringify({
        source_code: sourceCode,
        language_id: langId,
        stdin: ""
      })
    });
    
    if (!response.ok) {
      throw new Error(`API error: ${response.status}`);
    }
    
    const result = await response.json();
    let output = "";
    
    if (result.compile_output) output += "Compilation Error:\n" + result.compile_output + "\n";
    if (result.stderr) output += "Runtime Error:\n" + result.stderr + "\n";
    if (result.stdout) output += result.stdout + "\n";
    if (result.message) output += "System Message:\n" + result.message + "\n";
    if (output === "") output = "⚠ No output generated";
    
    document.getElementById("output").innerText = output;
  } catch (error) {
    document.getElementById("output").innerText = "❌ Error: " + error.message;
  }
}

function toggleTheme() {
  const body = document.body;
  body.classList.toggle("dark");
  body.classList.toggle("light");
  editor.setOption("theme", body.classList.contains("dark") ? "dracula" : "eclipse");
}


editor.setOption("extraKeys", {
  ...editor.getOption("extraKeys"),
  "Ctrl-Enter": runCode
});


document.addEventListener("contextmenu", (e) => e.preventDefault());
document.addEventListener("keydown", (e) => {
  if (e.key === "F12" ||
      (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
      (e.ctrlKey && e.key === "U")) {
    e.preventDefault();
    alert("Developer tools are disabled in this environment.");
  }
});


window.onload = () => {
  loadTemplate("71", "python");
  document.getElementById("output").innerText = "# Welcome to Multi-Language IDE\n# Select a language from the sidebar or click \"Run Code\" to execute the current program\n\nprint(\"Hello, World!\")";
};
</script>
</body>
</html>
